System.register("chunks:///_virtual/Card.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,r,n,s,o,a,l,u,c,p,S,h,m,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.createForOfIteratorHelperLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Sprite,u=t.SpriteAtlas,c=t.SpriteFrame,p=t.Color,S=t.Vec3,h=t.tween,m=t.UITransform,d=t.Component}],execute:function(){var b,g,f,v,w,y,k,_,F,C,z,B,I;o._RF.push({},"e9ae8MoviNGnbXZ2ussE1Bx","Card",void 0);var A=a.ccclass,H=a.property;t("Card",(b=A("Card"),g=H({type:l,tooltip:"数字 Sprite"}),f=H({type:l,tooltip:"小花色 Sprite (左上角)"}),v=H({type:l,tooltip:"大花色 Sprite (中间图案)"}),w=H({type:u,tooltip:"扑克图集"}),y=H({type:c,tooltip:"【必拖】牌背图片"}),b((F=i((_=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r))||this,n(i,"numSprite",F,s(i)),n(i,"smallSuit",C,s(i)),n(i,"bigSuit",z,s(i)),n(i,"pokerAtlas",B,s(i)),n(i,"cardBackFrame",I,s(i)),i.isSelected=!1,i}e(i,t);var o=i.prototype;return o.start=function(){},o.showBack=function(){this.numSprite&&(this.numSprite.node.active=!1),this.smallSuit&&(this.smallSuit.node.active=!1),this.bigSuit&&(this.bigSuit.node.active=!1);var t=this.node.getComponent(l);t&&(t.node.active=!0,t.color=p.WHITE,this.cardBackFrame?t.spriteFrame=this.cardBackFrame:this.setSprite(t,"poker_back"))},o.setCard=function(t,i){if(this.numSprite&&(this.numSprite.node.active=!0),this.smallSuit&&(this.smallSuit.node.active=!0),this.bigSuit&&(this.bigSuit.node.active=!0),this.numSprite&&(this.numSprite.color=p.WHITE),this.smallSuit&&(this.smallSuit.color=p.WHITE),this.bigSuit&&(this.bigSuit.color=p.WHITE),this.setSprite(this.node.getComponent(l),"bg"),t>=13){var e=13==t?"smalltag_4":"smalltag_5";this.setSprite(this.smallSuit,e),this.smallSuit&&(this.smallSuit.node.setScale(new S(.7,.7,1)),this.smallSuit.node.setPosition(new S(-50,38,0)));var r=13==t?"bigtag_4":"bigtag_5";return this.setSprite(this.bigSuit,r),this.bigSuit&&(this.bigSuit.node.setPosition(new S(20,-30,0)),this.bigSuit.node.setScale(new S(.75,.75,1))),void(this.numSprite&&(this.numSprite.node.active=!1))}var n=[2,3,4,5,6,7,8,9,10,11,12,0,1][t],s=0===i||2===i?"red_":"black_";this.setSprite(this.numSprite,s+n);var o="bigtag_"+i;this.setSprite(this.smallSuit,o),this.smallSuit&&this.smallSuit.node.setScale(new S(.4,.4,1)),this.setSprite(this.bigSuit,o),this.bigSuit&&(this.bigSuit.node.setPosition(new S(10,-25,0)),this.bigSuit.node.setScale(new S(.9,.9,1)))},o.setSelectState=function(t,i){if(void 0===i&&(i=!1),this.isSelected!==t){this.isSelected=t;var e=this.isSelected?20:0,r=this.node.position.x;i?this.node.setPosition(new S(r,e,0)):h(this.node).stop().to(.1,{position:new S(r,e,0)}).start()}},o.getWidth=function(){var t=this.node.getComponent(m);return t?t.contentSize.width:0},o.setSprite=function(t,i){if(this.pokerAtlas&&t){for(var e,n=this.pokerAtlas.getSpriteFrames(),s=null,o=r(n);!(e=o()).done;){var a=e.value;if(a.name===i||a.name===i+".png"||a.name.endsWith("/"+i)){s=a;break}}s?(t.spriteFrame=s,t.node.active=!0):"poker_back"!==i||this.cardBackFrame||console.warn("Card: 找不到图片 "+i)}},i}(d)).prototype,"numSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(_.prototype,"smallSuit",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(_.prototype,"bigSuit",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(_.prototype,"pokerAtlas",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(_.prototype,"cardBackFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=_))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,r,t;return{setters:[function(e){a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,t=e._decorator}],execute:function(){var i;r._RF.push({},"08963cVuXZFXaSL7RKDAxVE","GameLogic",void 0);var n=t.ccclass,l=e("CardType",function(e){return e[e.Invalid=0]="Invalid",e[e.Single=1]="Single",e[e.Pair=2]="Pair",e[e.Triple=3]="Triple",e[e.TripleWithOne=4]="TripleWithOne",e[e.TripleWithPair=5]="TripleWithPair",e[e.Bomb=6]="Bomb",e[e.Rocket=7]="Rocket",e[e.Straight=8]="Straight",e[e.StraightPairs=9]="StraightPairs",e[e.Plane=10]="Plane",e}({}));e("GameLogic",n("GameLogic")(i=function(){function e(){}return e.toLogicValue=function(e){return 13===e?16:14===e?17:e+3},e.toRawValue=function(e){return 16===e?13:17===e?14:e-3},e.canBeat=function(e,a){return e.type===l.Rocket||a.type!==l.Rocket&&(e.type===l.Bomb?a.type!==l.Bomb||e.val>a.val:a.type!==l.Bomb&&(e.type===a.type&&((e.type!==l.Straight&&e.type!==l.StraightPairs||e.cards.length===a.cards.length)&&e.val>a.val)))},e.analyzeCards=function(e){var r=e.length;if(0===r)return{type:l.Invalid,val:0,cards:[]};e.sort((function(e,a){return a.val-e.val}));for(var t,i=new Map,n=a(e);!(t=n()).done;){var c=t.value;i.set(c.val,(i.get(c.val)||0)+1)}for(var o,v=0,u=0,p=a(i.entries());!(o=p()).done;){var s=o.value,f=s[0],d=s[1];d>v?(v=d,u=f):d===v&&f>u&&(u=f)}var g=e[0];if(1===r)return{type:l.Single,val:g.val,cards:e};if(2===r){if(17===e[0].val&&16===e[1].val)return{type:l.Rocket,val:100,cards:e};if(e[0].val===e[1].val)return{type:l.Pair,val:g.val,cards:e}}if(3===r&&3===v)return{type:l.Triple,val:u,cards:e};if(4===r){if(4===v)return{type:l.Bomb,val:u,cards:e};if(3===v)return{type:l.TripleWithOne,val:u,cards:e}}return r>=5&&1===v&&e[0].val<15&&e[0].val-e[r-1].val==r-1?{type:l.Straight,val:g.val,cards:e}:{type:l.Invalid,val:0,cards:[]}},e}())||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Card.ts","./GameLogic.ts","./OpponentHand.ts","./SmartAI.ts"],(function(t){var e,i,n,r,a,l,s,o,h,u,c,d,p,b,f,y,g,_,v,C,m,S,w,P,H,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,o=t.Prefab,h=t.Node,u=t.ParticleSystem2D,c=t.Label,d=t.AudioSource,p=t.AudioClip,b=t.instantiate,f=t.Vec3,y=t.tween,g=t.Layout,_=t.UITransform,v=t.Color,C=t.Vec2,m=t.Component},function(t){S=t.Card},function(t){w=t.GameLogic,P=t.CardType},function(t){H=t.OpponentHand},function(t){T=t.SmartAI}],execute:function(){var D,B,M,x,L,I,E,z,A,k,O,G,R,N,U,V,F,W,j,Q,q,J,K,X,Y,Z,$,tt,et,it,nt,rt,at,lt,st,ot,ht,ut,ct,dt,pt,bt,ft,yt,gt,_t,vt,Ct,mt,St,wt,Pt,Ht,Tt,Dt,Bt,Mt,xt,Lt,It,Et,zt,At,kt,Ot,Gt,Rt,Nt,Ut,Vt,Ft,Wt,jt,Qt,qt;l._RF.push({},"00e4dQ48bRD0pWoymx8EV95","GameManager",void 0);var Jt=s.ccclass,Kt=s.property,Xt=function(t){return t[t.Idle=0]="Idle",t[t.Deal=1]="Deal",t[t.Bid=2]="Bid",t[t.Double=3]="Double",t[t.Play=4]="Play",t[t.Settle=5]="Settle",t}(Xt||{});t("GameManager",(D=Jt("GameManager"),B=Kt({type:o}),M=Kt({type:h}),x=Kt({type:h}),L=Kt({type:h}),I=Kt({type:H}),E=Kt({type:H}),z=Kt({type:h}),A=Kt({type:h}),k=Kt({type:h}),O=Kt({type:h}),G=Kt({type:h,tooltip:"容器组：叫地主 (放叫地主+不叫)"}),R=Kt({type:h,tooltip:"容器组：抢地主 (放抢地主+不抢)"}),N=Kt({type:h,tooltip:"容器组：加倍 (放加倍+不加倍)"}),U=Kt({type:h,tooltip:"按钮：叫地主"}),V=Kt({type:h,tooltip:"按钮：不叫"}),F=Kt({type:h,tooltip:"按钮：抢地主"}),W=Kt({type:h,tooltip:"按钮：不抢"}),j=Kt({type:h,tooltip:"按钮：加倍"}),Q=Kt({type:h,tooltip:"按钮：不加倍"}),q=Kt({type:h}),J=Kt({type:h}),K=Kt({type:u}),X=Kt({type:c}),Y=Kt({type:c}),Z=Kt({type:c}),$=Kt({type:c}),tt=Kt({type:h}),et=Kt({type:c}),it=Kt({type:h}),nt=Kt({type:d}),rt=Kt({type:p}),at=Kt({type:p}),lt=Kt({type:p}),st=Kt({type:p}),ot=Kt({type:p}),ht=Kt({type:p}),D((dt=e((ct=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,r(e,"cardPrefab",dt,a(e)),r(e,"meHolder",pt,a(e)),r(e,"tableHolder",bt,a(e)),r(e,"topHoleCardHolder",ft,a(e)),r(e,"leftPlayer",yt,a(e)),r(e,"rightPlayer",gt,a(e)),r(e,"btnPlay",_t,a(e)),r(e,"btnPass",vt,a(e)),r(e,"btnHint",Ct,a(e)),r(e,"panelBid",mt,a(e)),r(e,"groupCall",St,a(e)),r(e,"groupGrab",wt,a(e)),r(e,"groupDouble",Pt,a(e)),r(e,"btnCall",Ht,a(e)),r(e,"btnNoCall",Tt,a(e)),r(e,"btnGrab",Dt,a(e)),r(e,"btnNoGrab",Bt,a(e)),r(e,"btnDouble",Mt,a(e)),r(e,"btnNoDouble",xt,a(e)),r(e,"iconLandlord",Lt,a(e)),r(e,"shakeRoot",It,a(e)),r(e,"winParticle",Et,a(e)),r(e,"lblMyScore",zt,a(e)),r(e,"lblLeftScore",At,a(e)),r(e,"lblRightScore",kt,a(e)),r(e,"infoLabel",Ot,a(e)),r(e,"resultPanel",Gt,a(e)),r(e,"resultTitle",Rt,a(e)),r(e,"btnRestart",Nt,a(e)),r(e,"audioSource",Ut,a(e)),r(e,"clipBGM",Vt,a(e)),r(e,"clipClick",Ft,a(e)),r(e,"clipDeal",Wt,a(e)),r(e,"clipPlay",jt,a(e)),r(e,"clipWin",Qt,a(e)),r(e,"clipLose",qt,a(e)),e._myHand=[],e._myCardScripts=[],e._lastPlayedCards=[],e._currentBoss="",e._landlord="",e._holeCards=[],e._isSliding=!1,e._startIdx=-1,e._currentIdx=-1,e._targetSelectState=!0,e._isActing=!1,e._hintMoves=[],e._hintIndex=0,e._baseScore=100,e._currentMultiple=1,e._scoreMe=1e4,e._scoreLeft=5e3,e._scoreRight=5e3,e._phase=Xt.Idle,e._bidTurnIndex=0,e._firstBidder=0,e._bidCount=0,e._hasLandlordCandidate=!1,e._landlordCandidate="",e}i(e,t);var l=e.prototype;return l.start=function(){var t=this;this.meHolder&&(this.meHolder.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.meHolder.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),this.meHolder.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.meHolder.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this)),this.btnPlay&&this.btnPlay.on(h.EventType.TOUCH_END,this.onPlayBtnClicked,this),this.btnPass&&this.btnPass.on(h.EventType.TOUCH_END,this.onPassBtnClicked,this),this.btnRestart&&this.btnRestart.on(h.EventType.TOUCH_END,this.initGame,this),this.btnCall&&this.btnCall.on(h.EventType.TOUCH_END,(function(){return t.onUserBtnClick(!0)}),this),this.btnGrab&&this.btnGrab.on(h.EventType.TOUCH_END,(function(){return t.onUserBtnClick(!0)}),this),this.btnDouble&&this.btnDouble.on(h.EventType.TOUCH_END,(function(){return t.onUserBtnClick(!0)}),this),this.btnNoCall&&this.btnNoCall.on(h.EventType.TOUCH_END,(function(){return t.onUserBtnClick(!1)}),this),this.btnNoGrab&&this.btnNoGrab.on(h.EventType.TOUCH_END,(function(){return t.onUserBtnClick(!1)}),this),this.btnNoDouble&&this.btnNoDouble.on(h.EventType.TOUCH_END,(function(){return t.onUserBtnClick(!1)}),this),this.btnHint&&(this.btnHint.off(h.EventType.TOUCH_END),this.btnHint.on(h.EventType.TOUCH_END,this.onHintClicked,this)),this.scheduleOnce((function(){return t.initGame()}),.5)},l.playBGM=function(){this.audioSource&&this.clipBGM&&(this.audioSource.stop(),this.audioSource.clip=this.clipBGM,this.audioSource.loop=!0,this.audioSource.play())},l.playEffect=function(t){this.audioSource&&t&&this.audioSource.playOneShot(t)},l.initGame=function(){var t,e,i,n=this;console.log("游戏重置 V7.0 分组布局版"),this._phase=Xt.Idle,this.resultPanel&&(this.resultPanel.active=!1),this.panelBid&&(this.panelBid.active=!1),this.hideAllGroups(),this.iconLandlord&&(this.iconLandlord.active=!1),this.btnHint&&(this.btnHint.active=!1),this.winParticle&&(this.winParticle.stopSystem(),this.winParticle.node.active=!1),null==(t=this.topHoleCardHolder)||t.removeAllChildren(),null==(e=this.meHolder)||e.removeAllChildren(),null==(i=this.tableHolder)||i.removeAllChildren(),this.playBGM(),this._isActing=!0,this._currentMultiple=1,this.updateScoreLabels(),this._lastPlayedCards=[],this._currentBoss="",this._landlord="",this._myCardScripts=[],this._hintMoves=[],this._hintIndex=0;for(var r=[],a=0;a<=12;a++)for(var l=0;l<=3;l++)r.push({val:w.toLogicValue(a),suit:l,index:0});r.push({val:16,suit:0,index:0}),r.push({val:17,suit:1,index:0}),r.sort((function(){return Math.random()-.5})),this._holeCards=r.slice(0,3);var s=r.slice(3);this.renderHoleCards(!1),this._myHand=s.slice(0,17),this._myHand.sort((function(t,e){return e.val-t.val})),this.leftPlayer&&this.leftPlayer.setCards(s.slice(17,34),!0),this.rightPlayer&&this.rightPlayer.setCards(s.slice(34,51),!0),this.showDebugTip("正在发牌..."),this.animateDeal(this._myHand,(function(){n.startBiddingLogic()}))},l.hideAllGroups=function(){this.groupCall&&(this.groupCall.active=!1),this.groupGrab&&(this.groupGrab.active=!1),this.groupDouble&&(this.groupDouble.active=!1)},l.startBiddingLogic=function(){this._phase=Xt.Bid,this._bidCount=0,this._hasLandlordCandidate=!1,this._landlordCandidate="",this._firstBidder=Math.floor(3*Math.random()),this._bidTurnIndex=this._firstBidder,this.showDebugTip(this.getSeatName(this._bidTurnIndex)+" 开始叫牌"),this.processBidTurn()},l.getSeatName=function(t){return 0===t?"我":1===t?"右家":"左家"},l.processBidTurn=function(){var t=this;this._bidCount>=3?this.finishBidding():0===this._bidTurnIndex?this.showMyBidPanel():this.scheduleOnce((function(){t.aiBidAction()}),1)},l.showMyBidPanel=function(){this.panelBid&&(this.panelBid.active=!0,this.hideAllGroups(),this._phase===Xt.Bid?this._hasLandlordCandidate?this.groupGrab&&(this.groupGrab.active=!0):this.groupCall&&(this.groupCall.active=!0):this._phase===Xt.Double&&this.groupDouble&&(this.groupDouble.active=!0))},l.onUserBtnClick=function(t){var e=this;this.panelBid.active=!1,this.playEffect(this.clipClick),this._phase===Xt.Bid?(t?(this._hasLandlordCandidate?(this._currentMultiple*=2,this.showDebugTip("我方抢地主，倍数翻倍")):this.showDebugTip("我方叫地主"),this._hasLandlordCandidate=!0,this._landlordCandidate="me"):this.showDebugTip("我方不叫"),this.nextBidder()):this._phase===Xt.Double&&(t?(this._currentMultiple*=2,this.showDebugTip("我方加倍")):this.showDebugTip("我方不加倍"),this.scheduleOnce((function(){return e.startGameplay()}),.5))},l.aiBidAction=function(){var t=Math.random()>.5,e=1===this._bidTurnIndex?"right":"left",i="right"===e?"右家":"左家";t?(this._hasLandlordCandidate?(this._currentMultiple*=2,this.showDebugTip(i+" 抢地主，倍数翻倍")):this.showDebugTip(i+" 叫地主"),this._hasLandlordCandidate=!0,this._landlordCandidate=e):this.showDebugTip(i+" 不叫"),this.nextBidder()},l.nextBidder=function(){this._bidCount++,this._bidTurnIndex=(this._bidTurnIndex+1)%3,this.processBidTurn()},l.finishBidding=function(){var t=this;if(!this._landlordCandidate)return this.showDebugTip("无人叫地主，重新发牌..."),void this.scheduleOnce((function(){return t.initGame()}),1.5);this.setLandlord(this._landlordCandidate)},l.setLandlord=function(t){var e;(this._landlord=t,this.showDebugTip("地主身份确认："+("me"===t?"我方":t)),this.renderHoleCards(!0),"me"===t)?((e=this._myHand).push.apply(e,this._holeCards),this._myHand.sort((function(t,e){return e.val-t.val})),this.renderMyHand()):"left"===t?this.leftPlayer.addCards(this._holeCards):"right"===t&&this.rightPlayer.addCards(this._holeCards);this.updateLandlordIcon(t),this.startDoublingPhase()},l.startDoublingPhase=function(){this._phase=Xt.Double,this.showDebugTip("请选择是否加倍"),this.showMyBidPanel()},l.startGameplay=function(){this._phase=Xt.Play,"me"===this._landlord?(this._currentBoss="me",this.startMyTurn()):this.opponentAction(this._landlord)},l.renderHoleCards=function(t){if(this.topHoleCardHolder){this.topHoleCardHolder.removeAllChildren();for(var e=0;e<this._holeCards.length;e++){var i=this._holeCards[e],n=b(this.cardPrefab);n.parent=this.topHoleCardHolder,n.setScale(.4,.4,1),n.setPosition(40*e-40,0,0);var r=n.getComponent(S);r&&(r.setCard(w.toRawValue(i.val),i.suit),t||r.showBack())}}},l.updateLandlordIcon=function(t){if(this.iconLandlord){this.iconLandlord.active=!0;var e=new f(0,0,0);"me"===t&&(e=new f(-426,-46,0)),"left"===t&&(e=new f(-275,278,0)),"right"===t&&(e=new f(592,296,0)),y(this.iconLandlord).to(.5,{position:e,scale:new f(1,1,1)},{easing:"backOut"}).start()}},l.updateScoreLabels=function(){this.lblMyScore&&(this.lblMyScore.string=""+this._scoreMe),this.lblLeftScore&&(this.lblLeftScore.string=""+this._scoreLeft),this.lblRightScore&&(this.lblRightScore.string=""+this._scoreRight)},l.startMyTurn=function(){var t;(this._isActing=!1,this._hintMoves=[],this._hintIndex=0,"me"===this._currentBoss)&&(this._lastPlayedCards=[],null==(t=this.tableHolder)||t.removeAllChildren(),this.showDebugTip("当前轮到我方任意出牌"));this.btnPlay&&(this.btnPlay.active=!0),this.btnPass&&(this.btnPass.active=this._lastPlayedCards.length>0&&"me"!==this._currentBoss),this.btnHint&&(this.btnHint.active=this._lastPlayedCards.length>0&&"me"!==this._currentBoss)},l.animateDeal=function(t,e){var i=this,n=0;this.schedule((function(){if(n>=t.length)e&&e();else{var r=t[n];i.createOneCard(r),i.playEffect(i.clipDeal),n++}}),.04,t.length)},l.createOneCard=function(t){if(this.meHolder){var e=b(this.cardPrefab);e.parent=this.meHolder,e.setPosition(0,0,0),e.setScale(1,1,1);var i=e.getComponent(S);i&&(i.setCard(w.toRawValue(t.val),t.suit),i.setSelectState(!1,!0),this._myCardScripts.push(i))}},l.onHintClicked=function(){if(!this._isActing){if(0===this._hintMoves.length){var t=P.Invalid,e=0;if(this._lastPlayedCards.length>0&&"me"!==this._currentBoss){var i=w.analyzeCards(this._lastPlayedCards);t=i.type,e=i.val}this._hintMoves=T.findAllMoves(this._myHand,t,e),this._hintIndex=0}if(0!==this._hintMoves.length){var r=this._hintMoves[this._hintIndex];this._myCardScripts.forEach((function(t){return t.setSelectState(!1)}));for(var a=0;a<this._myHand.length;a++){for(var l,s=this._myHand[a],o=!1,h=n(r);!(l=h()).done;){var u=l.value;if(u.val===s.val&&u.suit===s.suit){o=!0;break}}o&&this._myCardScripts[a].setSelectState(!0)}this._hintIndex=(this._hintIndex+1)%this._hintMoves.length,this.playEffect(this.clipClick)}else this.showDebugTip("提示：没有可压制的牌型")}},l.onPlayBtnClicked=function(){var t=this;if(!this._isActing){for(var e=[],i=[],n=[],r=0;r<this._myCardScripts.length;r++)this._myCardScripts[r].isSelected?(e.push(this._myHand[r]),n.push(this._myCardScripts[r].node.worldPosition.clone())):i.push(this._myHand[r]);if(0!==e.length){var a=w.analyzeCards(e);if(a.type!==P.Invalid){if(this._lastPlayedCards.length>0&&"me"!==this._currentBoss){var l=w.analyzeCards(this._lastPlayedCards);if(!w.canBeat(a,l))return void this.showDebugTip("牌型小于上家，无法出牌")}a.type===P.Bomb&&(this._currentMultiple*=2,this.showDebugTip("炸弹！当前倍数 x"+this._currentMultiple),this.shakeScreen(.5,15)),a.type===P.Rocket&&(this._currentMultiple*=2,this.showDebugTip("王炸！当前倍数 x"+this._currentMultiple),this.shakeScreen(.8,30)),this.playEffect(this.clipPlay),this._isActing=!0,this._myHand=i,this._lastPlayedCards=e,this._currentBoss="me",this.renderMyHand(),this.animatePlayedCards(e,n),this.btnPlay&&(this.btnPlay.active=!1),this.btnPass&&(this.btnPass.active=!1),this.btnHint&&(this.btnHint.active=!1),0!==this._myHand.length?this.scheduleOnce((function(){return t.opponentAction("right")}),1):this.scheduleOnce((function(){return t.showResult(!0)}),1)}else this.showDebugTip("牌型不符合规则")}else this.showDebugTip("请选择要出的牌")}},l.onPassBtnClicked=function(){var t=this;this._isActing||(this.showDebugTip("不出"),this.playEffect(this.clipClick),this._isActing=!0,this.btnPlay&&(this.btnPlay.active=!1),this.btnPass&&(this.btnPass.active=!1),this.btnHint&&(this.btnHint.active=!1),this.scheduleOnce((function(){return t.opponentAction("right")}),.5))},l.opponentAction=function(t){var e=this,i="right"===t?this.rightPlayer:this.leftPlayer,n="right"===t?"left":"me",r="right"===t?"右边":"左边";if(i){var a;if(this._currentBoss===t)null==(a=this.tableHolder)||a.removeAllChildren();var l=this._currentBoss===t?[]:this._lastPlayedCards;i.startTurn(l,(function(a){if(a.length>0){var l=w.analyzeCards(a);if(l.type===P.Bomb&&(e._currentMultiple*=2,e.showDebugTip(r+" 打出炸弹，当前倍数 x"+e._currentMultiple),e.shakeScreen(.5,15)),l.type===P.Rocket&&(e._currentMultiple*=2,e.showDebugTip(r+" 打出王炸，当前倍数 x"+e._currentMultiple),e.shakeScreen(.8,30)),e._lastPlayedCards=a,e._currentBoss=t,e.displayTableCards(a),e.playEffect(e.clipPlay),e.showDebugTip(r+" 出牌"),0===i.getCardCount())return void e.scheduleOnce((function(){return e.showResult(!1)}),1)}else e.showDebugTip(r+" 不出");"me"===n?e.startMyTurn():e.opponentAction(n)}))}},l.displayTableCards=function(t){if(this.tableHolder){this.tableHolder.removeAllChildren();var e=this.tableHolder.getComponent(g);e&&(e.enabled=!1);var i=-(35*(t.length-1))/2;t.sort((function(t,e){return e.val-t.val}));for(var n=0;n<t.length;n++){var r=t[n],a=b(this.cardPrefab);a.parent=this.tableHolder,a.setScale(.1,.1,1),a.setPosition(i+35*n,0,0);var l=a.getComponent(S);l&&l.setCard(w.toRawValue(r.val),r.suit),y(a).to(.3,{scale:new f(.5,.5,1)},{easing:"backOut"}).start()}}},l.animatePlayedCards=function(t,e){if(this.tableHolder){this.tableHolder.removeAllChildren();var i=this.tableHolder.getComponent(g);i&&(i.enabled=!1);for(var n=-(35*(t.length-1))/2,r=0;r<t.length;r++){var a=t[r],l=b(this.cardPrefab);if(l.parent=this.tableHolder,l.getComponent(S).setCard(w.toRawValue(a.val),a.suit),e&&e[r]){var s=this.tableHolder.getComponent(_).convertToNodeSpaceAR(e[r]);l.setPosition(s),l.setScale(1,1,1)}else l.setPosition(n+35*r,0,0),l.setScale(.5,.5,1);var o=10*(Math.random()-.5);l.angle=o,y(l).parallel(y().to(.3,{position:new f(n+35*r,0,0)},{easing:"cubicOut"}),y().to(.2,{scale:new f(.6,.6,1)},{easing:"backOut"})).start()}}},l.renderMyHand=function(){var t;null==(t=this.meHolder)||t.removeAllChildren(),this._myCardScripts=[],this._myHand.sort((function(t,e){return e.val-t.val}));for(var e,i=n(this._myHand);!(e=i()).done;){var r=e.value;this.createOneCard(r)}},l.showResult=function(t){this.resultPanel&&(this.resultPanel.active=!0,this.resultTitle&&(this.resultTitle.string=t?"胜利":"失败",this.resultTitle.color=t?new v(255,215,0):new v(200,200,200))),this.audioSource&&this.audioSource.stop(),this.playEffect(t?this.clipWin:this.clipLose),t&&this.winParticle?(this.winParticle.node.active=!0,this.winParticle.resetSystem()):this.winParticle&&(this.winParticle.stopSystem(),this.winParticle.node.active=!1);var e=this._baseScore*this._currentMultiple,i="me"===this._landlord;t?i?(this._scoreMe+=2*e,this._scoreLeft-=e,this._scoreRight-=e):(this._scoreMe+=e,"left"===this._landlord?(this._scoreLeft-=2*e,this._scoreRight+=e):"right"===this._landlord&&(this._scoreRight-=2*e,this._scoreLeft+=e)):i?(this._scoreMe-=2*e,this._scoreLeft+=e,this._scoreRight+=e):(this._scoreMe-=e,"left"===this._landlord?(this._scoreLeft+=2*e,this._scoreRight-=e):"right"===this._landlord&&(this._scoreRight+=2*e,this._scoreLeft-=e)),this.updateScoreLabels();var n=t?"胜":"负",r=i?2*e:e;this.showDebugTip("结算："+n+" "+r+" 分 (当前倍数: "+this._currentMultiple+")")},l.showDebugTip=function(t){this.infoLabel&&(this.infoLabel.string=t,this.infoLabel.node.active=!0,this.unschedule(this.hideTip),this.scheduleOnce(this.hideTip,2))},l.hideTip=function(){this.infoLabel&&this.infoLabel.isValid&&(this.infoLabel.node.active=!1)},l.onTouchStart=function(t){if(!this._isActing){var e=this.getCardIndexByPos(t.getUILocation());-1!==e?(this.playEffect(this.clipClick),this._isSliding=!0,this._startIdx=e,this._currentIdx=e,this._targetSelectState=!this._myCardScripts[e].isSelected,this.updateSelectionVisual()):this._myCardScripts.forEach((function(t){return t.setSelectState(!1)}))}},l.shakeScreen=function(t,e){void 0===e&&(e=20);var i=this.shakeRoot||this.node,n=i.position.clone();y(i).to(.05,{position:new f(n.x+e,n.y+e,0)}).to(.05,{position:new f(n.x-e,n.y-e,0)}).to(.05,{position:new f(n.x+.8*e,n.y-.8*e,0)}).to(.05,{position:new f(n.x-.8*e,n.y+.8*e,0)}).to(.05,{position:n}).start()},l.onTouchMove=function(t){if(this._isSliding){var e=this.getCardIndexByPos(t.getUILocation());-1!==e&&e!==this._currentIdx&&(this._currentIdx=e,this.updateSelectionVisual())}},l.onTouchEnd=function(t){this._isSliding=!1,this._targetSelectState&&this._smartCorrectSelection()},l._smartCorrectSelection=function(){var t=this;if(-1!==this._startIdx&&-1!==this._currentIdx){var e=Math.min(this._startIdx,this._currentIdx),i=Math.max(this._startIdx,this._currentIdx);if(e!==i){for(var r=[],a=e;a<=i;a++)r.push({index:a,val:this._myHand[a].val});var l=r.map((function(e){return t._myHand[e.index]}));if(w.analyzeCards(l).type===P.Invalid){r.sort((function(t,e){return t.val-e.val}));var s=[],o=this._scanForStraight(r),h=this._scanForPairs(r);if(h.length>=6&&h.length>s.length&&(s=h),o.length>=5&&o.length>s.length&&(s=o),s.length>0){for(var u=e;u<=i;u++)this._myCardScripts[u].setSelectState(!1);for(var c,d=n(s);!(c=d()).done;){var p=c.value;this._myCardScripts[p].setSelectState(!0)}}else for(var b=e;b<=i;b++)this._myCardScripts[b].setSelectState(!0)}else for(var f=e;f<=i;f++)this._myCardScripts[f].setSelectState(!0)}}},l._scanForStraight=function(t){if(t.length<5)return[];var e=t.filter((function(t){return t.val<15}));if(e.length<5)return[];for(var i,r=new Map,a=n(e);!(i=a()).done;){var l=i.value;r.has(l.val)||r.set(l.val,[]),r.get(l.val).push(l.index)}for(var s=Array.from(r.keys()).sort((function(t,e){return t-e})),o=[],h=[],u=0;u<s.length;u++){var c=s[u];0===h.length||c===h[h.length-1]+1?h.push(c):(h.length>o.length&&(o=[].concat(h)),h=[c])}if(h.length>o.length&&(o=[].concat(h)),o.length>=5){for(var d,p=[],b=n(o);!(d=b()).done;){var f=d.value;p.push(r.get(f)[0])}return p}return[]},l._scanForPairs=function(t){var e=t.filter((function(t){return t.val<15}));if(e.length<6)return[];for(var i,r=new Map,a=n(e);!(i=a()).done;){var l=i.value;r.has(l.val)||r.set(l.val,[]),r.get(l.val).push(l.index)}var s=Array.from(r.keys()).filter((function(t){return r.get(t).length>=2})).sort((function(t,e){return t-e}));if(s.length<3)return[];for(var o,h=[],u=[],c=n(s);!(o=c()).done;){var d=o.value;0===u.length||d===u[u.length-1]+1?u.push(d):(u.length>h.length&&(h=[].concat(u)),u=[d])}if(u.length>h.length&&(h=[].concat(u)),h.length>=3){for(var p,b=[],f=n(h);!(p=f()).done;){var y=p.value;b.push(r.get(y)[0]),b.push(r.get(y)[1])}return b}return[]},l.updateSelectionVisual=function(){for(var t=Math.min(this._startIdx,this._currentIdx),e=Math.max(this._startIdx,this._currentIdx),i=t;i<=e;i++)this._myCardScripts[i]&&this._myCardScripts[i].setSelectState(this._targetSelectState)},l.getCardIndexByPos=function(t){var e;if(null==(e=this.meHolder)||!e.getComponent(_))return-1;for(var i=this.meHolder.getComponent(_).convertToNodeSpaceAR(new f(t.x,t.y,0)),n=this._myCardScripts.length-1;n>=0;n--)if(this._myCardScripts[n].node.getComponent(_).getBoundingBox().contains(new C(i.x,i.y)))return n;return-1},e}(m)).prototype,"cardPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(ct.prototype,"meHolder",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(ct.prototype,"tableHolder",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(ct.prototype,"topHoleCardHolder",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(ct.prototype,"leftPlayer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(ct.prototype,"rightPlayer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=e(ct.prototype,"btnPlay",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(ct.prototype,"btnPass",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(ct.prototype,"btnHint",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(ct.prototype,"panelBid",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(ct.prototype,"groupCall",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(ct.prototype,"groupGrab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(ct.prototype,"groupDouble",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ht=e(ct.prototype,"btnCall",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=e(ct.prototype,"btnNoCall",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=e(ct.prototype,"btnGrab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(ct.prototype,"btnNoGrab",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=e(ct.prototype,"btnDouble",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=e(ct.prototype,"btnNoDouble",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=e(ct.prototype,"iconLandlord",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(ct.prototype,"shakeRoot",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=e(ct.prototype,"winParticle",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=e(ct.prototype,"lblMyScore",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(ct.prototype,"lblLeftScore",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=e(ct.prototype,"lblRightScore",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(ct.prototype,"infoLabel",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=e(ct.prototype,"resultPanel",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(ct.prototype,"resultTitle",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(ct.prototype,"btnRestart",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=e(ct.prototype,"audioSource",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vt=e(ct.prototype,"clipBGM",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=e(ct.prototype,"clipClick",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=e(ct.prototype,"clipDeal",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jt=e(ct.prototype,"clipPlay",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qt=e(ct.prototype,"clipWin",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qt=e(ct.prototype,"clipLose",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=ct))||ut));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Card.ts","./GameLogic.ts","./GameManager.ts","./OpponentHand.ts","./Player.ts","./PokerAlgo.ts","./SmartAI.ts"],(function(){return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/OpponentHand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLogic.ts","./Card.ts","./SmartAI.ts"],(function(t){var e,a,r,n,i,o,s,d,l,u,c,h,p,f,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,r=t.createForOfIteratorHelperLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,d=t.Label,l=t.Node,u=t.Prefab,c=t.instantiate,h=t.Component},function(t){p=t.GameLogic},function(t){f=t.Card},function(t){v=t.SmartAI}],execute:function(){var g,C,y,b,_,m,H,L,P;o._RF.push({},"ea670SVLvZJ0bSYtMBYXYPh","OpponentHand",void 0);var D=s.ccclass,S=s.property;t("OpponentHand",(g=D("OpponentHand"),C=S({type:d}),y=S({type:l}),b=S({type:u}),g((H=e((m=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"countLabel",H,i(e)),n(e,"cardHolder",L,i(e)),n(e,"cardPrefab",P,i(e)),e._handCards=[],e}a(e,t);var o=e.prototype;return o.setCards=function(t,e){this._handCards=t,this.sortHand(),this.updateDisplay()},o.addCards=function(t){var e;(e=this._handCards).push.apply(e,t),this.sortHand(),this.updateDisplay()},o.getCardCount=function(){return this._handCards.length},o.sortHand=function(){this._handCards.sort((function(t,e){return t.val!==e.val?e.val-t.val:e.suit-t.suit}))},o.updateDisplay=function(){if(this.countLabel&&(this.countLabel.string=this._handCards.length.toString()),this.cardHolder&&this.cardPrefab){this.cardHolder.removeAllChildren();for(var t=Math.min(this._handCards.length,10),e=0;e<t;e++){var a=c(this.cardPrefab);a.parent=this.cardHolder,a.setScale(.5,.5,1),a.setPosition(3*e,0,0);var r=a.getComponent(f);r&&r.showBack()}}},o.startTurn=function(t,e){var a=this,r=.5+Math.random();this.scheduleOnce((function(){var r=[];if(t&&0!==t.length){var n=p.analyzeCards(t);r=v.findMove(a._handCards,n.type,n.val)}else r=a.decideBestLead();r.length>0?(a.removeCards(r),e(r)):e([])}),r)},o.decideBestLead=function(){if(0===this._handCards.length)return[];for(var t,e=new Map,a=r(this._handCards);!(t=a()).done;){var n=t.value;e.has(n.val)||e.set(n.val,[]),e.get(n.val).push(n)}for(var i,o=Array.from(e.keys()).sort((function(t,e){return t-e})),s=r(o);!(i=s()).done;){var d=i.value,l=e.get(d);if(3===l.length){for(var u,c=r(o);!(u=c()).done;){var h=u.value,p=e.get(h);if(h!==d&&1===p.length)return[].concat(l,[p[0]])}return l}}for(var f,v=r(o);!(f=v()).done;){var g=f.value,C=e.get(g);if(2===C.length)return C}return[this._handCards[this._handCards.length-1]]},o.removeCards=function(t){for(var e,a=[],n=[].concat(t),i=r(this._handCards);!(e=i()).done;){for(var o=e.value,s=-1,d=0;d<n.length;d++)if(n[d].val===o.val&&n[d].suit===o.suit){s=d;break}-1!==s?n.splice(s,1):a.push(o)}this._handCards=a,this.updateDisplay()},e}(h)).prototype,"countLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(m.prototype,"cardHolder",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(m.prototype,"cardPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=m))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,i,a,l,o,c,u,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Label,c=e.Sprite,u=e.Node,s=e.Component}],execute:function(){var p,b,f,d,y,g,h,v,L,m,I;a._RF.push({},"55282PreBBI7IhzCn1BgRWe","Player",void 0);var z=l.ccclass,P=l.property;e("Player",(p=z("Player"),b=P(o),f=P(o),d=P(c),y=P(u),p((v=r((h=function(e){function r(){for(var r,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return r=e.call.apply(e,[this].concat(a))||this,t(r,"nameLabel",v,i(r)),t(r,"scoreLabel",L,i(r)),t(r,"avatar",m,i(r)),t(r,"landlordIcon",I,i(r)),r}n(r,e);var a=r.prototype;return a.setInfo=function(e,r){this.nameLabel.string=e,this.scoreLabel.string=r.toString()},a.setLandlord=function(e){this.landlordIcon&&(this.landlordIcon.active=e)},r}(s)).prototype,"nameLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(h.prototype,"scoreLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(h.prototype,"avatar",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(h.prototype,"landlordIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=h))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/PokerAlgo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,r;return{setters:[function(n){e=n.createForOfIteratorHelperLoose},function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"6165aN1cJ1OxaqgkBiwYgnl","PokerAlgo",void 0);n("PokerAlgo",function(){function n(){}return n.filterSelectedCards=function(n){if(!n||0==n.length)return[];var e=[].concat(n).sort((function(n,e){return e.val-n.val})),r=this.findBomb(e);if(r.length>0)return r;var t=this.findStraight(e);return t.length>=5?t:n.map((function(n){return n.index}))},n.findBomb=function(n){for(var r,t=new Map,o=e(n);!(r=o()).done;){var u=r.value;t.has(u.val)||t.set(u.val,[]),t.get(u.val).push(u.index)}for(var i,a=e(t.values());!(i=a()).done;){var l=i.value;if(4===l.length)return l}return[]},n.findStraight=function(n){return n.filter((function(n){return n.val<15})).length,[]},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/SmartAI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLogic.ts"],(function(e){var r,a,t,n;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,t=e._decorator},function(e){n=e.CardType}],execute:function(){var o;a._RF.push({},"61d40OemwVC7ZfkaOkBIAxb","SmartAI",void 0);var l=t.ccclass;e("SmartAI",l("SmartAI")(o=function(){function e(){}return e.findMove=function(e,r,a){var t=this.findAllMoves(e,r,a);return t.length>0?t[0]:[]},e.findAllMoves=function(e,a,t){for(var o,l=[],v=[].concat(e).sort((function(e,r){return e.val-r.val})),u=new Map,s=r(v);!(o=s()).done;){var c=o.value;u.has(c.val)||u.set(c.val,[]),u.get(c.val).push(c)}for(var i,f=Array.from(u.keys()).sort((function(e,r){return e-r})),g=[],h=r(f);!(i=h()).done;){var p=i.value;4===u.get(p).length&&g.push(u.get(p))}if(!a||a===n.Invalid){v.length>0&&l.push([v[0]]);for(var d,k=r(f);!(d=k()).done;){var b=d.value;if(u.get(b).length>=2){l.push(u.get(b).slice(0,2));break}}for(var m,A=r(f);!(m=A()).done;){var I=m.value;if(3===u.get(I).length){for(var y,S=r(f);!(y=S()).done;){var M=y.value;if(M!==I&&1===u.get(M).length){l.push(u.get(I).concat(u.get(M)[0]));break}}if(2===l.length)break}}return l}switch(a){case n.Single:for(var B,O=r(f);!(B=O()).done;){var T=B.value;T>t&&l.push([u.get(T)[0]])}break;case n.Pair:for(var _,w=r(f);!(_=w()).done;){var F=_.value;F>t&&u.get(F).length>=2&&l.push(u.get(F).slice(0,2))}break;case n.Triple:case n.TripleWithOne:for(var L,R=r(f);!(L=R()).done;){var x=L.value,C=u.get(x);if(x>t&&C.length>=3){var H=C.slice(0,3);if(a===n.Triple)l.push(H);else for(var P,j=r(f);!(P=j()).done;){var G=P.value;if(G!==x&&1===u.get(G).length){l.push(H.concat(u.get(G)[0]));break}}}}break;case n.Bomb:for(var V,W=r(f);!(V=W()).done;){var Z=V.value;Z>t&&4===u.get(Z).length&&l.push(u.get(Z))}}return a!==n.Bomb&&a!==n.Rocket&&l.push.apply(l,g),l},e}())||o);a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});